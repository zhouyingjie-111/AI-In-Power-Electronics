<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>AI+ç”µåŠ›ç”µå­ - ä¸»ç•Œé¢</title>
  <style>
    :root { color-scheme: light; }
    html, body { height: 100%; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Microsoft YaHei', Arial, sans-serif; 
      background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); 
      color: #1a1a1a; 
      display: flex;
      flex-direction: column;
    }
    
    .header {
      background: #ffffff;
      border-bottom: 1px solid #d0d0d0;
      padding: 20px 0;
      text-align: center;
    }
    
    .header h1 {
      margin: 0;
      font-size: 2.5em;
      background: linear-gradient(135deg, #3a86ff, #7a5cff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .header p {
      margin: 10px 0 0 0;
      color: #666666;
      font-size: 1.1em;
    }
    
    .main-content {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px 20px;
    }
    
    .function-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      max-width: 1200px;
      width: 100%;
    }
    
    .function-card {
      background: #ffffff;
      border: 1px solid #d0d0d0;
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-sizing: border-box;
      height: 420px; /* ç»Ÿä¸€å¡ç‰‡é«˜åº¦ï¼Œç¡®ä¿é•¿å®½ä¸€è‡´ */
      display: flex;
      flex-direction: column;
    }
    
    .function-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(135deg, #3a86ff, #7a5cff);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }
    
    .function-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(58, 134, 255, 0.15);
      border-color: #3a86ff;
    }
    
    .function-card:hover::before {
      transform: scaleX(1);
    }
    
    .function-icon {
      font-size: 3em;
      margin-bottom: 20px;
      display: block;
    }
    
    .function-title {
      font-size: 1.5em;
      font-weight: 600;
      margin-bottom: 15px;
      color: #1a1a1a;
    }
    
    .function-description {
      color: #666666;
      line-height: 1.6;
      margin-bottom: 20px;
      flex: 1; /* æè¿°å ä½ï¼ŒæŒ‰é’®è´´åº• */
    }
    
    .function-button {
      background: linear-gradient(135deg, #3a86ff, #7a5cff);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .function-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(58, 134, 255, 0.3);
    }
    
    .status-bar {
      background: #ffffff;
      border-top: 1px solid #d0d0d0;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9em;
      color: #666666;
    }
    
    .status-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #4caf50;
    }
    
    .logout-btn {
      background: none;
      border: 1px solid #d0d0d0;
      color: #666666;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .logout-btn:hover {
      border-color: #ff6b6b;
      color: #ff6b6b;
    }
    
    /* å®šä½ï¼šæ¡Œé¢ç«¯å°† 3 åˆ—å¸ƒå±€ï¼Œç¬¬äºŒè¡Œä¸¤å¡ç‰‡è·¨ä¸¤åˆ—å¹¶å±…ä¸­ */
    .card-ppo { grid-column: 1; grid-row: 1; }
    .card-sim { grid-column: 2; grid-row: 1; }
    .card-eda { grid-column: 3; grid-row: 1; }
    /* ç¬¬äºŒè¡Œä¸­éƒ¨å¡ç‰‡ï¼šä¸ä¸Šæ’å•åˆ—åŒç­‰å®½åº¦ï¼ˆåŠ¨æ€ï¼‰ï¼Œæ°´å¹³å±…ä¸­ */
    .card-ctrl { 
      grid-column: 1 / 3; 
      grid-row: 2; 
      justify-self: center; 
      /* è·¨ä¸¤åˆ—åŒºåŸŸ(ä¸¤åˆ—+1ä¸ª30pxé—´è·)ä¸­ï¼Œå•åˆ—å®½åº¦ = (åŒºåŸŸå®½ - 30px)/2 */
      width: calc((100% - 30px) / 2);
    }
    .card-chat { 
      grid-column: 2 / 4; 
      grid-row: 2; 
      justify-self: center; 
      /* ä¸ä¸Šæ–¹ä¸€è‡´ï¼Œç¡®ä¿ä¸å•åˆ—å¡ç‰‡ç­‰å®½ */
      width: calc((100% - 30px) / 2);
    }

    @media (max-width: 768px) {
      .function-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      /* ç§»åŠ¨ç«¯æ¢å¤è‡ªç„¶æµ */
      .function-grid > .function-card { grid-column: auto; grid-row: auto; justify-self: stretch; max-width: none; }
      
      .function-card {
        padding: 20px;
      }
      
      .header h1 {
        font-size: 2em;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>AI+ç”µåŠ›ç”µå­</h1>
    <p>æ™ºèƒ½å‚æ•°è®¾è®¡ä¸ä»¿çœŸéªŒè¯å¹³å°</p>
  </div>
  
  <div class="main-content">
    <div class="function-grid">
      <!-- å‚æ•°è®¾è®¡åŠŸèƒ½ -->
      <div class="function-card card-ppo" onclick="startParameterDesign()">
        <span class="function-icon">âš™ï¸</span>
        <h3 class="function-title">å‚æ•°è®¾è®¡</h3>
        <p class="function-description">
          ä½¿ç”¨AIç®—æ³•è‡ªåŠ¨è®¾è®¡Buckå˜æ¢å™¨çš„å…³é”®å‚æ•°ï¼ŒåŒ…æ‹¬ç”µæ„Ÿã€ç”µå®¹ã€å¼€å…³é¢‘ç‡ç­‰ï¼Œç¡®ä¿æœ€ä¼˜æ€§èƒ½ã€‚
        </p>
        <button class="function-button">å¼€å§‹å‚æ•°è®¾è®¡</button>
      </div>
      
      <!-- ä»¿çœŸéªŒè¯åŠŸèƒ½ -->
      <div class="function-card card-sim" onclick="startSimulation()">
        <span class="function-icon">ğŸ”¬</span>
        <h3 class="function-title">ä»¿çœŸéªŒè¯</h3>
        <p class="function-description">
          åœ¨MATLAB/Simulinkç¯å¢ƒä¸­è¿è¡Œä»¿çœŸï¼ŒéªŒè¯è®¾è®¡çš„Buckå˜æ¢å™¨æ€§èƒ½ï¼ŒåŒ…æ‹¬æ•ˆç‡ã€ç¨³å®šæ€§ç­‰æŒ‡æ ‡ã€‚
        </p>
        <button class="function-button">å¼€å§‹ä»¿çœŸéªŒè¯</button>
      </div>
      
      <!-- åŸç†å›¾/PCBè‡ªåŠ¨è®¾è®¡åŠŸèƒ½ -->
      <div class="function-card card-eda" onclick="startEDA()">
        <span class="function-icon">ğŸ”Œ</span>
        <h3 class="function-title">åŸç†å›¾/PCBè‡ªåŠ¨è®¾è®¡</h3>
        <p class="function-description">
          åŸºäºè®¾è®¡å‚æ•°ä¸å¯¹è¯è·å¾—çš„å™¨ä»¶é€‰å‹ï¼Œè‡ªåŠ¨ç”ŸæˆåŸç†å›¾ä¸PCBåˆç‰ˆï¼Œè¾…åŠ©å®Œæˆå™¨ä»¶é€‰å‹ä¸å¸ƒå±€å¸ƒçº¿çš„åˆæ­¥æ–¹æ¡ˆã€‚
        </p>
        <button class="function-button">å¼€å§‹åŸç†å›¾/PCBè®¾è®¡</button>
      </div>
      
      <!-- æ§åˆ¶å™¨ä»£ç è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½ï¼ˆä¸æ™ºèƒ½å¯¹è¯å¯¹ç§°ï¼Œä»…è®¾è®¡æŒ‰é”®ä¸æè¿°ï¼ŒåŠŸèƒ½åç»­æ·»åŠ ï¼‰ -->
      <div class="function-card card-ctrl" onclick="startControllerCode()">
        <span class="function-icon">ğŸ’»</span>
        <h3 class="function-title">æ§åˆ¶å™¨ä»£ç è‡ªåŠ¨ç”Ÿæˆ</h3>
        <p class="function-description">
          åŸºäºå·²è®¾è®¡å‚æ•°ä¸äº¤äº’éœ€æ±‚ï¼Œç”Ÿæˆ/ç¼–è¾‘æ§åˆ¶å™¨ä»£ç æ¨¡æ¿ï¼ˆå¦‚åµŒå…¥å¼Cã€Simulinkæ§åˆ¶é€»è¾‘ç­‰ï¼‰ï¼Œä¾¿äºå¿«é€Ÿéƒ¨ç½²ä¸äºŒæ¬¡å¼€å‘ã€‚
        </p>
        <button class="function-button">å¼€å§‹ä»£ç ç¼–å†™</button>
      </div>

      <!-- è·³è½¬å¯¹è¯åŠŸèƒ½ -->
      <div class="function-card card-chat" onclick="goToChat()">
        <span class="function-icon">ğŸ’¬</span>
        <h3 class="function-title">æ™ºèƒ½å¯¹è¯</h3>
        <p class="function-description">
          ä¸AIåŠ©æ‰‹è¿›è¡Œæ™ºèƒ½å¯¹è¯ï¼Œè·å–ç”µåŠ›ç”µå­è®¾è®¡å»ºè®®ã€æŠ€æœ¯å’¨è¯¢å’Œé—®é¢˜è§£ç­”ï¼Œè·å¾—ä¸“ä¸šçš„æŠ€æœ¯æ”¯æŒã€‚
        </p>
        <button class="function-button">å¼€å§‹å¯¹è¯</button>
      </div>
    </div>
  </div>
  
  <div class="status-bar">
    <div class="status-item">
      <span class="status-dot"></span>
      <span>ç³»ç»Ÿè¿è¡Œæ­£å¸¸</span>
    </div>
    <div class="status-item">
      <span>ç”¨æˆ·èº«ä»½: {% if session.role == 'admin' %}ç®¡ç†å‘˜{% else %}æ™®é€šç”¨æˆ·{% endif %}</span>
      <button class="logout-btn" onclick="goToDatabase()">æ•°æ®åº“ç»´æŠ¤</button>
      <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
    </div>
  </div>

  <script>
    // å‚æ•°è®¾è®¡åŠŸèƒ½ï¼ˆæ˜ å°„åˆ° ppo -> PPO.pyï¼‰
    function startParameterDesign() {
      window.location.href = '/run?task=ppo';
    }
    
    // ä»¿çœŸéªŒè¯åŠŸèƒ½ï¼ˆæ˜ å°„åˆ° run_sim -> run_simulink.pyï¼‰
    function startSimulation() {
      window.location.href = '/run?task=run_sim';
    }
    
    // åŸç†å›¾/PCBè‡ªåŠ¨è®¾è®¡
    function startEDA() {
      window.location.href = '/run?task=eda';
    }
    
    // æ§åˆ¶å™¨ä»£ç ç¼–å†™è‡ªåŠ¨ç”Ÿæˆï¼šç¡®è®¤åè·³è½¬åˆ°å¤–éƒ¨é¡µé¢
    function startControllerCode() {
      const url = 'https://www.coze.cn/space/7546496844034162739/ui-builder-preview/7546449200230367284/pc/Iro46ri3E9';
      const ok = confirm('æ˜¯å¦å‰å¾€æ§åˆ¶å™¨ä»£ç è‡ªåŠ¨ç¼–å†™é¡µé¢ï¼Ÿ');
      if (ok) {
        window.location.href = url;
      }
    }
    
    // è·³è½¬å¯¹è¯åŠŸèƒ½
    function goToChat() {
      const url = 'https://www.coze.cn/space/7546496844034162739/ui-builder-preview/7546449200230367284/pc/home';
      const ok = confirm('æ˜¯å¦è¿›å…¥å¯¹è¯é¡µé¢ï¼Ÿ');
      if (ok) {
        window.location.href = url;
      }
    }
    
    // æ•°æ®åº“ç»´æŠ¤
    function goToDatabase() {
      window.location.href = '/database_manager';
    }
    
    // é€€å‡ºç™»å½•
    function logout() {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        window.location.href = '/logout';
      }
    }
  </script>
  <div id="app"></div>
  <script type="text/javascript">
    var webSdkScript = document.createElement('script');
    webSdkScript.src = 'https://lf-cdn.coze.cn/obj/unpkg/flow-platform/builder-web-sdk/0.1.1-beta.1/dist/umd/index.js';
    document.head.appendChild(webSdkScript);
    webSdkScript.onload = function () {
      new CozeWebSDK.AppWebSDK({
        "token": "pat_********",
        "appId": "7546449200230367284",
        "container": "#app",
        "userInfo": {
          "id": "",
          "url": "",
          "nickname": "User"
        }
      });
    }
  </script>
</body>
</html>
